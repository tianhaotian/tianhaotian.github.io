<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="blogs">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="blogs">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="blogs">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>blogs</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">frodle's blogs</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/04/travel-plan/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="frodle">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/04/travel-plan/" itemprop="url">旅行计划</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-04T23:19:47+08:00">
                2019-12-04
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/12/04/travel-plan/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/12/04/travel-plan/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="云南西线旅行规划"><a href="#云南西线旅行规划" class="headerlink" title="云南西线旅行规划"></a>云南西线旅行规划</h2><h4 id="放前面的东西"><a href="#放前面的东西" class="headerlink" title="放前面的东西"></a>放前面的东西</h4><ul>
<li><p><strong>时间范围：12月12号~12月22号的区间内</strong></p>
</li>
<li><p><strong>主要地点：大理、丽江、泸沽湖、香格里拉等</strong></p>
</li>
<li><p><strong>集合地点在昆明，毕竟大理的机票太贵了，但是昆明估计没有时间逛了</strong></p>
</li>
</ul>
<h4 id="去昆明的时间点"><a href="#去昆明的时间点" class="headerlink" title="去昆明的时间点"></a>去昆明的时间点</h4><p>航班选择：南航CZ3997</p>
<p>航班时间：19:20 - 23:25</p>
<p>预期我的时间在12月12日周四晚，或者13日周五晚到昆明</p>
<p>你们想逛昆明的话推荐提前一天到或者当天上午到，可以逛一逛昆明（比如滇池），我觉得昆明和其他地方有重复，就不考虑逛了哈</p>
<p>我们集合完第二天早上8点左右坐动车去大理（车程两小时，10点多就可以到大理）</p>
<h4 id="大理（2天）"><a href="#大理（2天）" class="headerlink" title="大理（2天）"></a>大理（2天）</h4><p>大理主要包含了几个地方：苍山，洱海和大理古城，双廊也在洱海边上，沙溪古镇距离有点远</p>
<h5 id="苍山"><a href="#苍山" class="headerlink" title="苍山"></a>苍山</h5><p>位置在古城附近，地质公园，山顶海拔不低，有三条索道，其中大索道的垂直落差有一千多米…如果要去的话推荐上午去，时间控制在半天到一天，感觉优先级低于洱海和大理古城，索道往返加门票大约270多</p>
<h5 id="洱海"><a href="#洱海" class="headerlink" title="洱海"></a>洱海</h5><p>环湖骑行和坐船是一定的，骑行一圈的时间还是比较久，所以可以选择骑行一部分，古城可以直接走到洱海的龙龛码头，很近，然而双廊附近没有码头，只有客运站，坐车可能也比较久，这个看时间再抉择</p>
<h5 id="大理古城"><a href="#大理古城" class="headerlink" title="大理古城"></a>大理古城</h5><p>云南比较有历史和文化气息的古城，白族文化，相比双廊会热闹一些，文化底蕴也更多，而沙溪则是更古朴一些，双廊更偏向悠闲的去观看苍山洱海</p>
<h5 id="沙溪古镇"><a href="#沙溪古镇" class="headerlink" title="沙溪古镇"></a>沙溪古镇</h5><p>非常古朴，保存的更原始一些。但是距离有些远，来回加逛可能就要一天</p>
<h5 id="住的地方"><a href="#住的地方" class="headerlink" title="住的地方"></a>住的地方</h5><p>有两种选择，一是住在古城边上，而是洱海边上（如才村），我个人比较偏向古城边上，因为可以找到不错的小院，有点小贵但是很好，airbnb上面找民宿</p>
<h5 id="时间和时间线"><a href="#时间和时间线" class="headerlink" title="时间和时间线"></a>时间和时间线</h5><p>给大理两天左右的时间玩，当天去了下午可以环洱海和坐船，晚上可以逛大理古城，第二天可以取舍 双廊，苍山，沙溪…大理适合慢玩，慢慢悠悠聊聊天，就过去了</p>
<p>洱海 -&gt; 古城 -&gt; 双廊/苍山/沙溪</p>
<p>如果第二天时间相对很充足的话，可以晚上坐火车去丽江，否则就第三天上午坐车去丽江，我比较推荐第三天上午</p>
<p>PS: 这个地方有个抉择，其实腾冲也可以去，但是相对来说，名气不如其他地方大，而且也要两三天，所以除非特别想去，否则应该不会去</p>
<h4 id="丽江（2天）"><a href="#丽江（2天）" class="headerlink" title="丽江（2天）"></a>丽江（2天）</h4><p>丽江主要三个地方，古城，玉龙雪山和拉市海，古镇就去大研古城就可以了，玉龙雪山可能比较远，如果去的话一天时间，大研古城和拉市海可以一天逛完，基本白天拉市海晚上古城</p>
<h5 id="大研古城"><a href="#大研古城" class="headerlink" title="大研古城"></a>大研古城</h5><p>丽江古城的主要部分，最热闹的部分，商业化比较严重，可以傍晚到晚上逛一逛</p>
<h5 id="拉市海"><a href="#拉市海" class="headerlink" title="拉市海"></a>拉市海</h5><p>到丽江后当天下午可以去逛这个地方，比较类似洱海，但是相对会更古朴，人也不会太多，可以在这里闲逛一整个下午</p>
<h5 id="玉龙雪山"><a href="#玉龙雪山" class="headerlink" title="玉龙雪山"></a>玉龙雪山</h5><p>玉龙雪山和蓝月谷距离市区比较远，大约一个小时的路程，整个玩下来要一整天，雪山可以做索道上到中间部分然后再开始爬，顶峰高度在4500米以上，可能会有明显的高反，而且冬季天气不好上面风会比较大，量力而行</p>
<h4 id="泸沽湖（1-5-2天）"><a href="#泸沽湖（1-5-2天）" class="headerlink" title="泸沽湖（1.5~2天）"></a>泸沽湖（1.5~2天）</h4><p>从丽江到泸沽湖要三个小时的车程，这个路程是山路且比较难走，考虑租车或者包车，包车成本会比租车贵一半左右，租车（300）包车（600），泸沽湖整个地方也比较大，这里应该预留出往返丽江两天整的时间</p>
<h4 id="香格里拉（1天左右）"><a href="#香格里拉（1天左右）" class="headerlink" title="香格里拉（1天左右）"></a>香格里拉（1天左右）</h4><p>香格里拉去的话就是藏区了，海拔比较高，问题是冬季不太适合去纳帕海和普拉措这两个地方，然而独克宗古城和松赞林还是值得去的，如果去香格里拉的话可能就自驾比较方便，景区都离得太远，包车的话又太贵，一天五六百，远不如租车划算，从丽江去香格里拉要三个小时，中途路过虎跳峡</p>
<h4 id="飞来寺和梅里（1天左右）"><a href="#飞来寺和梅里（1天左右）" class="headerlink" title="飞来寺和梅里（1天左右）"></a>飞来寺和梅里（1天左右）</h4><p>过了香格里拉沿着214国道继续走，三个小时左右就可以到德钦的飞来寺，这里可以看到梅里雪山，此处再往西就是西藏的边界，是214国道转318川藏线的云南边界，这个地方主要是藏族的文化，以及梅里雪山的两个观景台，时间原因以及海拔较高的原因，可能无法走雨崩徒步的路线（至少还要多1.5天才可能够）</p>
<h4 id="备选方案：成都？"><a href="#备选方案：成都？" class="headerlink" title="备选方案：成都？"></a>备选方案：成都？</h4><p>如果从泸沽湖回丽江后，考虑不去香格里拉的线路（路上花的时间非常多，仅仅是为了看藏寺和雪山，就要花三天左右，而且是高原，飞来寺接近四千米的海拔，会比较艰苦），则就去成都呆2~3天也是极好的，成都就不多说了，春熙路，宽窄巷子，大熊猫基地，杜甫草堂，太古里等等吃的和玩的都很多，悠闲逛一逛也是极好的</p>
<h3 id="整体行程"><a href="#整体行程" class="headerlink" title="整体行程"></a>整体行程</h3><p>大理 -&gt; 丽江 -&gt; 泸沽湖 -&gt; 香格里拉-德钦 or 成都</p>
<p>大理可以住在大理古城，airbnb上面400多能住到2室的白族小院，位置就在古城里面，住两天</p>
<p><a href="https://www.airbnb.cn/rooms/33569391?check_in=2019-12-14&amp;check_out=2019-12-16&amp;source_impression_id=p3_1575470990_7gNmRVdeHU%2F4mqfJ" target="_blank" rel="noopener">https://www.airbnb.cn/rooms/33569391?check_in=2019-12-14&amp;check_out=2019-12-16&amp;source_impression_id=p3_1575470990_7gNmRVdeHU%2F4mqfJ</a></p>
<p>大理 to 丽江 火车2个多小时，票价很便宜34</p>
<p>丽江住的话古城和大理差不多，如果想继续住小院的话可以住在古城，因为城市分布的关系，也可以住在古城附近的城区，相对便宜一些，200多一天</p>
<p><a href="https://www.airbnb.cn/rooms/35844937?check_in=2019-12-14&amp;check_out=2019-12-16&amp;source_impression_id=p3_1575471513_kEtIoMZGCgGmWBmR" target="_blank" rel="noopener">https://www.airbnb.cn/rooms/35844937?check_in=2019-12-14&amp;check_out=2019-12-16&amp;source_impression_id=p3_1575471513_kEtIoMZGCgGmWBmR</a></p>
<p>丽江 to 泸沽湖 (往返) 租车 or 包车，包车省心，租车便宜</p>
<p>泸沽湖不太推荐Airbnb，因为周边房源少，且两室以上的不合算，考虑携程上面定酒店，200多一晚能订到很好的酒店了</p>
<p>丽江 to 香格里拉-德钦 （往返）租车会好一些，太远了主要是，包车真心太贵</p>
<p>香格里拉呆一晚可以租到不错的民宿，藏式的院子</p>
<p><a href="https://www.airbnb.cn/rooms/36899863?check_in=2019-12-19&amp;check_out=2019-12-20&amp;source_impression_id=p3_1575471910_6sI%2BtNIbS7kGFasG" target="_blank" rel="noopener">https://www.airbnb.cn/rooms/36899863?check_in=2019-12-19&amp;check_out=2019-12-20&amp;source_impression_id=p3_1575471910_6sI%2BtNIbS7kGFasG</a></p>
<p>德钦飞来寺的话，有家酒店很有名…推荐这个</p>
<p><a href="https://hotels.ctrip.com/hotel/2303517.html?isFull=F&amp;masterhotelid=2303517&amp;hcityid=3928#ctm_ref=hod_sr_lst_dl_n_1_1" target="_blank" rel="noopener">https://hotels.ctrip.com/hotel/2303517.html?isFull=F&amp;masterhotelid=2303517&amp;hcityid=3928#ctm_ref=hod_sr_lst_dl_n_1_1</a></p>
<p>如果去成都的话，可以省下香格里拉和德钦的时间，大概2~3天，可以直接丽江 to 成都，机票400多一些，不是很贵</p>
<p>成都的民宿很好，位置和价格基本都是随便挑的，各种风格都有…随便看几个…</p>
<p><a href="https://www.airbnb.cn/rooms/38855851?check_in=2019-12-19&amp;check_out=2019-12-20&amp;source_impression_id=p3_1575472259_xZ%2F4GeL4eAUZ6qnT" target="_blank" rel="noopener">https://www.airbnb.cn/rooms/38855851?check_in=2019-12-19&amp;check_out=2019-12-20&amp;source_impression_id=p3_1575472259_xZ%2F4GeL4eAUZ6qnT</a></p>
<p><a href="https://www.airbnb.cn/rooms/38706994?check_in=2019-12-19&amp;check_out=2019-12-20&amp;source_impression_id=p3_1575472321_iKyb7Dmf0l2LRTj3" target="_blank" rel="noopener">https://www.airbnb.cn/rooms/38706994?check_in=2019-12-19&amp;check_out=2019-12-20&amp;source_impression_id=p3_1575472321_iKyb7Dmf0l2LRTj3</a></p>
<p><a href="https://www.airbnb.cn/rooms/31573986?check_in=2019-12-19&amp;check_out=2019-12-20&amp;source_impression_id=p3_1575472460_QbLGk7Zve%2FIS30CW" target="_blank" rel="noopener">https://www.airbnb.cn/rooms/31573986?check_in=2019-12-19&amp;check_out=2019-12-20&amp;source_impression_id=p3_1575472460_QbLGk7Zve%2FIS30CW</a></p>
<p><strong>整体预算估计</strong>：我感觉得人均2500以上，不包括大往返机票….偏高，但毕竟时间很长，且是自由行，也没有省的点，除了住以外，然而住是不可能住的很差的….</p>
<p>整体行程8~9天，可能有点紧，我这边看情况吧，先别订票…等到我确定下来再订票吧…我担心我这边时间是不稳定的，目前淡季可能机票价格也比较稳定，不着急…万一时间不够，可能还会备选成都重庆….</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/30/geojson使用geotools读取多类型geometry/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="frodle">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/30/geojson使用geotools读取多类型geometry/" itemprop="url">FeatureCollection读取多类型geometry</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-30T19:03:31+08:00">
                2019-10-30
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/10/30/geojson使用geotools读取多类型geometry/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/10/30/geojson使用geotools读取多类型geometry/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Geotools中的FeatureCollection支持多类型的Geometry"><a href="#Geotools中的FeatureCollection支持多类型的Geometry" class="headerlink" title="Geotools中的FeatureCollection支持多类型的Geometry"></a>Geotools中的FeatureCollection支持多类型的Geometry</h3><p><strong>原读取geojson数据并写入PostGis的逻辑</strong></p>
<p><img src="/2019/10/30/geojson使用geotools读取多类型geometry/image-20191030131734245.png" alt="image-20191030131734245"></p>
<p><strong>原逻辑不支持多类型Geometry的原因</strong></p>
<p>SimpleFeatureTypeBuilder维护了每一个feature中的属性和状态，Geotools文档（<a href="http://docs.geotools.org/stable/javadocs/org/geotools/feature/simple/SimpleFeatureTypeBuilder.html）中有描述" target="_blank" rel="noopener">http://docs.geotools.org/stable/javadocs/org/geotools/feature/simple/SimpleFeatureTypeBuilder.html）中有描述</a></p>
<p>A default geometry for the feature type can be specified explictly via <a href="http://docs.geotools.org/stable/javadocs/org/geotools/feature/simple/SimpleFeatureTypeBuilder.html#setDefaultGeometry-java.lang.String-" target="_blank" rel="noopener"><code>setDefaultGeometry(String)</code></a>. However if one is not set the first geometric attribute (<a href="http://docs.geotools.org/stable/javadocs/org/opengis/feature/type/GeometryType.html" target="_blank" rel="noopener"><code>GeometryType</code></a>) added will be resulting default. So if only specifying a single geometry for the type there is no need to call the method. However if specifying multiple geometries then it is good practice to specify the name of the default geometry type.</p>
<p>如果没有指定feature-type的geometry类型，则会取第一个feature的类型作为整个collection的geometry类型，其他类型则会被转换。因此代码里面判断geometry是点线面类型并不能生效，而且PostGis做数据源时，单表只能表示一个图层，如果要拆分点线面图层，则需要对应多个PostGis表，这就需要对collection中的featrue做拆分</p>
<p><strong>实现方案</strong></p>
<p>官方文档中给出的支持不同类型的geometry实质上是通过制定多个类型的properties来实现的，然而我们想要的是能不能把默认geometry的property支持不同类型的对象，SimpleFeatureTypeBuilder中的setDefaultGeometry可以修改默认的geometry属性，而add可以添加新的属性，remove可以删除已有属性，所以这里猜想可以通过先remove再add属性的方式，来修改一个字段的类型，然后最后设置geometry的属性字段，因为所有的geometry类型的对象类都继承自org.locationtech.jts.geom.Geometry这个抽象类，我们把默认的geometry属性的类型修改为这个抽象类的类型，就可以避免自动转换，然后再区分出点线面后，拆分出三个FeatureCollection来分别创建PostGis表，达到拆分图层的目的</p>
<p><img src="/2019/10/30/geojson使用geotools读取多类型geometry/image-20191030142404119.png" alt="image-20191030142404119"></p>
<p>最终写入PostGis的表</p>
<p><img src="/2019/10/30/geojson使用geotools读取多类型geometry/image-20191030142731337.png" alt="image-20191030142731337"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/29/postgis建表问题/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="frodle">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/29/postgis建表问题/" itemprop="url">记一次GIS数据上传到PostGis的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-29T15:39:59+08:00">
                2019-10-29
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/10/29/postgis建表问题/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/10/29/postgis建表问题/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="记录一次GIS上传报错问题排查"><a href="#记录一次GIS上传报错问题排查" class="headerlink" title="记录一次GIS上传报错问题排查"></a>记录一次GIS上传报错问题排查</h3><h5 id="现象：上传卡在了PostGis建完表写数据时，会报表找不到，然后报错，实际建表时并没有报错"><a href="#现象：上传卡在了PostGis建完表写数据时，会报表找不到，然后报错，实际建表时并没有报错" class="headerlink" title="现象：上传卡在了PostGis建完表写数据时，会报表找不到，然后报错，实际建表时并没有报错"></a>现象：上传卡在了PostGis建完表写数据时，会报表找不到，然后报错，实际建表时并没有报错</h5><p><strong>初步排查</strong>：通过报不存在的表名gisp_upload_c4a95ec8e8452135eb5a5ba7e6487585_1572330097034_5411_polygon去查PostGis发现确实没有这个表，但是查到了gisp_upload_c4a95ec8e8452135eb5a5ba7e6487585_1572330097034_5411这张表，而对应名称是没有改多图层上面之前的命名规则（新的规则在表名后面加了_图层类型），于是怀疑业务逻辑中可能哪里没有改全，于是开始debug上传的业务代码</p>
<p><img src="/2019/10/29/postgis建表问题/image-20191029151727889.png" alt="image-20191029151727889"></p>
<p><img src="/2019/10/29/postgis建表问题/image-20191029151850991.png" alt="image-20191029151850991"></p>
<p><img src="/2019/10/29/postgis建表问题/image-20191029151937843.png" alt="image-20191029151937843"></p>
<p>debug到了建表SQL，发现并没有问题，继续往下走，等execute完直接查库</p>
<p><img src="/2019/10/29/postgis建表问题/image-20191029152157183.png" alt="image-20191029152157183"></p>
<p>建表的SQL对了，但是表名确实不对，于是复制建表SQL在客户端直接执行</p>
<p><img src="/2019/10/29/postgis建表问题/image-20191029152728163.png" alt="image-20191029152728163"></p>
<p>发现是Postgre把表名给改了….问题找到了</p>
<p><strong>定位并解决</strong></p>
<p>PostgreSQL 表名有限制，长度为NAMEDATALEN（一般为64）</p>
<p>The system uses no more than NAMEDATALEN-1 characters of an identifier; longer names can be written in commands, but they will be truncated. By default, NAMEDATALEN is 64 so the maximum identifier length is 63 (but at the time PostgreSQL is built, NAMEDATALEN can be changed in src/include/postgres_ext.h).</p>
<p>From <a href="https://www.postgresql.org/docs/7.3/sql-syntax.html" target="_blank" rel="noopener">https://www.postgresql.org/docs/7.3/sql-syntax.html</a></p>
<p><strong>注意执行SQL时，Postgre不会报错！！！但是会报出Notice，然后执行truncated后的SQL</strong><br>NOTICE:  identifier “gisp_upload_c4a95ec8e8452135eb5a5ba7e6487585_1572330097034_5411_polygon” will be truncated to “gisp_upload_c4a95ec8e8452135eb5a5ba7e6487585_1572330097034_5411”</p>
<p>旧的表命名规则：gisp_upload_32位用户id_13位时间戳_4位随机数，总位数刚好是63（64-1长度）…..新的规则又在基础上加了6~12位不等，超过了最大长度会只保留到最大长度位</p>
<p>最终修改命名规则：</p>
<p>gisp_upload_16位用户id_10位时间戳_4位随机数_10位内的点线面标识，最大长度55位</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/06/tornado接收参数只是string/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="frodle">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/06/tornado接收参数只是string/" itemprop="url">请求参数不支持数值</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-06T15:10:31+08:00">
                2019-09-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/06/tornado接收参数只是string/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/06/tornado接收参数只是string/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Tornado剖析"><a href="#Tornado剖析" class="headerlink" title="Tornado剖析"></a>Tornado剖析</h2><h4 id="Q-为什么解析的参数格式只有string，而无法区分出int"><a href="#Q-为什么解析的参数格式只有string，而无法区分出int" class="headerlink" title="Q: 为什么解析的参数格式只有string，而无法区分出int"></a>Q: 为什么解析的参数格式只有string，而无法区分出int</h4><p>背景：前端传参通过form，fe转发需要把form表单转成raw_body的json字符串，转发给gis的后端服务，gis后端服务里面报错发现fe转发中的传参中，数字和字符都是字符串，而kotlin类型无法string转interger所以报错，这里调研了一下能否看框架参数能否支持到默认转发时保留不同类型</p>
<p>类tornado.web.RequestHandler维持了request变量（tornado.httputil.HTTPServerRequest类）<br>这个request变量中维护了arguments、body_arguments以及body三个属性，前两个是格式化的参数字典结构，后一个从请求中直接读出来的body string</p>
<p>request对象的初始化在tornado.routing._RoutingDelegate类中进行实例化，这里有个比较有趣的点，实例化request的方法是_RoutingDelegate.headers_received，而调度headers_received的模式实际上用yield关键字生成Future，使tornado.gen.Runner这个类异步调用了tornado.http1util.HTTP1Connection中方法_read_message，而tornado.gen.Runner是tornado中异步处理的核心类，同时也是Future对象的执行类，通过执行generator的send方法不断异步执行，最后set_result返回Future，这个设涉及到的就是tornado.gen模块如何异步切换请求上下文以及执行Future对象</p>
<p>_RoutingDelegate类中会对应使用data_received方法把body中的字节数据放入request结构中，依然是异步调度到Runner后，Runner在执行过程中调度tornado.http1util.HTTP1Connection的_read_fixed_body方法，读取数据就是直接对应到Request类的body属性中，类似于URL中的form格式存储</p>
<p>这里顺便提一下读取Header和Body的过程，Tornado使用tornado.iostream.IOStream处理套接字和IO操作，这个类实现非阻塞的socket读写操作，实现非阻塞依然是通过方法返回Future对象，然后ioloop到Runner中最后执行，这里不再详细解释具体每个不同的方法的特征和作用</p>
<p>通过IOStream非阻塞读取，最后回调_RoutingDelegate的data_received，写入body后再执行_RoutingDelegate的finish，更新request的arguments、body_arguments，真正的执行过程中，还涉及到_HandlerDelegate这个类，其实在整个请求的生命周期中，tornado会根据不同的阶段生成不同的Delegate类去处理，_RoutingDelegate是路由派发的实例化入口，也是异步调度的实例化入口，_RoutingDelegate会调度_HandlerDelegate这个类，去做真正的request的改动，最后处理到业务级别RequestHandler，所以实质上是_HandlerDelegate去修改request中的属性，在finish中，调用request的_parse_body方法，最终调用到parse_qsl这个方法，这个方法是用标准格式去切分body字符的，所以split出来的最终都是string格式，无法解析出int</p>
<p>在debug过程中，实际发现tornado在调度_RoutingDelegate和IOStream做IO时都会使用yield异步调度Future对象，最后set_result以及callback，也就是异步框架的体现</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/06/hello-world/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="frodle">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/06/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-06T15:03:40+08:00">
                2019-09-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/06/hello-world/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/06/hello-world/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/29/problem-0522/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="frodle">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/29/problem-0522/" itemprop="url">记录一次需求开发的坑（表格列总计新增计算方式）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-29T11:49:03+08:00">
                2019-05-29
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/29/problem-0522/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/29/problem-0522/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>开发两个自定义聚合函数 MAX_TO_VALUE OR MIN_TO_VALUE</p>
<h2 id="Problem-1-UDAF依赖class不对的问题"><a href="#Problem-1-UDAF依赖class不对的问题" class="headerlink" title="Problem 1: UDAF依赖class不对的问题"></a>Problem 1: UDAF依赖class不对的问题</h2><p>开发完成联调时发现执行SQL时，旧函数BOL指向的Java class不对</p>
<h3 id="定位以及解决"><a href="#定位以及解决" class="headerlink" title="定位以及解决"></a>定位以及解决</h3><p>Scala的Server程序会在启动时注册一遍所有UDF和UDAF，对于已经create过的函数将不会重复register，而开发中，发现BOL这个之前的函数对应的class命名不规范，修改了之前的class类名，而增加的MAX_TO_VALUE对应的class则用了之前函数的class，初始化时，BOL已经被创建了，指向的class不变，而由于实际上class名称已经被修改，所以出现了指向错误问题。</p>
<p>解决: 在Hive中删除之前已注册过的函数，重启Server，重新注册UDF后解决</p>
<h2 id="Problem-2-新增UDAF运行结果一直为Null"><a href="#Problem-2-新增UDAF运行结果一直为Null" class="headerlink" title="Problem 2: 新增UDAF运行结果一直为Null"></a>Problem 2: 新增UDAF运行结果一直为Null</h2><p>PostMan模拟请求时，MAX_TO_VALUE结果一直是空</p>
<h3 id="定位以及解决-1"><a href="#定位以及解决-1" class="headerlink" title="定位以及解决"></a>定位以及解决</h3><p>Debug模式运行Server，断点调试发现UDAF在iterate和terminatePartial完成后，merge的时候传入的数据结构SimpleNormalValue的outputVal一直是null，而在iterate阶段是确认有值的，后续跟踪断点发现terminatePartial-&gt;merge的过程中，hive使用了Java反射去传递SimpleNormalValue这个类的结构，而SimpleNormalValue是从SimpleValue继承过来的，父类中的protected类型的变量outputVal对于子类是private类型，反射是获取不到private的变量</p>
<p>解决: 声明从protected变为public，或者不继承outputVal而是重新声明子类的outputVal</p>
<h2 id="Problem-3-含对比时计算结果不对"><a href="#Problem-3-含对比时计算结果不对" class="headerlink" title="Problem 3: 含对比时计算结果不对"></a>Problem 3: 含对比时计算结果不对</h2><p>有对比维度时，表格统计的值预期是(3,null,null)，实际为(3,3,3)</p>
<h3 id="定位以及解决-2"><a href="#定位以及解决-2" class="headerlink" title="定位以及解决"></a>定位以及解决</h3><p>包含对比时，查询的原始表的维度中包含了对比维度，另外结果集是用临时表做if判断然后再聚合的结果，因此实际表数据中没有的空记录，会被展示到查询结果里面，而列总计统计的是原始表的数据，而非结果数据或临时表数据（因为要统计limit之前的数据），另外对原始数据的维度idx计算也不准确</p>
<p>解决: 修复原始数据维度idx偏移的问题</p>
<p>TODO: 后续把包含对比列总计的逻辑，从直接对原始表进行GROUP SET分类聚合，改造为对对比拆分后的临时表进行GROUP SET分类聚合，改造工作大致有几点：1.临时表的维度不包含对比，因此GROUP SET需要包含空，且一个数值要根据xy_fields结构拆分成多列，同理在处理列总计查询到的数据时，之前的分类聚合是对不同对比做拆分的，而后续结果是要根据数值idx在拆分; 2.包含TOP的时候是Join了结果表和原始表，需要改造为Join结果表和临时表; 3.包含高级计算（同环比）时，注意兼容之前为了处理高级计算列总计的相关开发</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/02/gdb调试运行中进程/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="frodle">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/02/gdb调试运行中进程/" itemprop="url">gdb调试运行中进程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-02T16:57:24+08:00">
                2019-03-02
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/02/gdb调试运行中进程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/02/gdb调试运行中进程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>安装Python调试环境: <a href="https://wiki.python.org/moin/DebuggingWithGdb" target="_blank" rel="noopener">https://wiki.python.org/moin/DebuggingWithGdb</a></p>
</blockquote>
<h2 id="常用GDB命令"><a href="#常用GDB命令" class="headerlink" title="常用GDB命令"></a>常用GDB命令</h2><ol>
<li>gdb原生命令<ol>
<li><code>bt</code> 显示当前线程C部分调用栈</li>
<li><code>list</code> 示当前线程的C代码执行位置</li>
<li><code>info threads</code> 显示当前进程中的所有线程</li>
<li><code>thread apply {ID} {command}</code> 在线程{ID}上执行命令, 默认命令在1号线程执行</li>
<li><code>print</code> 打印C变量值</li>
<li><code>up</code> 返回C部分调用者</li>
<li><code>down</code> 进入C部分函数调用</li>
</ol>
</li>
<li>Python扩展命令 <ol>
<li><code>py-bt</code> 显示当前线程Python部分调用栈</li>
<li><code>py-list</code> 显示当前线程的Python代码执行位置</li>
<li><code>py-locals</code> 获取当前局部变量的值</li>
<li><code>py-print</code> 打印某个变量的值</li>
<li><code>py-up</code> 返回Python部分调用者</li>
<li><code>py-down</code> 进入Python部分函数调用</li>
</ol>
</li>
</ol>
<h2 id="常用Linux命令"><a href="#常用Linux命令" class="headerlink" title="常用Linux命令"></a>常用Linux命令</h2><ol>
<li><code>strace -p {PID}</code> 跟踪指定进程的系统调用情况</li>
<li><code>lslocks</code> 列出当前系统中的文件锁情况</li>
<li><code>fuser {file}</code> 列出打开该文件的进程ID</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">frodle</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">frodle</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://tianhaotian.disqus.com/count.js" async></script>
    

    

  




	





  












  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'HG7On1dDpIgn5bjeqMqzSqx7-gzGzoHsz',
        appKey: 'GDRbP4lxFrqUQJUXq53cDnOt',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
